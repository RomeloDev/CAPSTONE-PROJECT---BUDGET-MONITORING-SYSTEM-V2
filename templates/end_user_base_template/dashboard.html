{% load static %}
<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}
            Default Title
        {% endblock title %}</title>
    <!-- Choices.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load HTMX -->
    <script src="{% static 'js/htmx.min.js' %}"></script>

    <!-- Choices.js JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

    <!-- Extra head content for child templates -->
    {% block extra_head %}{% endblock %}
</head>
<body>
    {% comment %} <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>Budget Monitoring System</h2>
            <nav>
                <ul>
                    <li><a href="{% url "user_dashboard" %}">Dashboard</a></li>
                    <li><a href="{% url "user_view_budget" %}">View Budget</a></li>
                    <li><a href="{% url "user_purchase_request" %}">Purchase Requests</a></li>
                    <li><a href="{% url "user_settings" %}">Settings</a></li>
                    <li><a href="{% url "logout" %}">Logout</a></li>
                </ul>
            </nav>
        </aside>
        {% block main-content %}{% endblock main-content %}
    </div> {% endcomment %}

    <!-- Sidebar toggle for mobile screen -->
    <button id="sidebarToggle" type="button" class="inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200">
        <span class="sr-only">Open sidebar</span>
        <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20">
        <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
        </svg>
    </button>

    <!-- Sidebar -->
    <aside id="logo-sidebar" class="fixed top-0 left-0 z-40 w-72 h-screen transition-transform -translate-x-full sm:translate-x-0" aria-label="Sidebar">
        <div class="h-full px-3 py-4 overflow-y-auto bg-gray-800">
            
            <div class="flex flex-col items-center ps-2.5 mb-5">
                <img src="https://bisu.edu.ph/wp-content/themes/gwt-wordpress-gwt-wordpress-26.0.0/images/bisu-logo2.png" class="h-[50px] me-3 sm:h-[50px]" alt="Flowbite Logo" />
                <span class="self-center text-xl font-semibold whitespace-nowrap text-white">Budget Monitoring System</span>
            </div>
            
            <ul class="space-y-2 font-medium">
                {% comment %} Dashboard {% endcomment %}
                <li>
                    <a href="{% url "user_dashboard" %}" class="flex items-center p-2 rounded-lg text-white
                    {% if request.resolver_match.url_name == 'user_dashboard' %}
                       bg-gray-700
                     {% else %}
                       hover:bg-gray-700 
                     {% endif %}
                       group">
                        
                        <svg class="w-5 h-5
                        {% if request.resolver_match.url_name == 'user_dashboard' %}
                            text-white
                        {% else %}
                            text-gray-400 group-hover:text-white
                        {% endif %} 
                         transition duration-75" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21">
                        <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"/>
                        <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"/>
                        </svg>
                        <span class="ms-3">Dashboard</span>
                    </a>
                </li>

                {% comment %} Budget Monitoring {% endcomment %}
                <li>
                    <a href="{% url "budget_overview" %}" class="flex items-center p-2 rounded-lg text-white
                    {% if request.resolver_match.url_name == 'budget_overview' or request.resolver_match.url_name == 'pre_budget_details' or request.resolver_match.url_name == 'quarterly_analysis' or request.resolver_match.url_name == 'transaction_history' or request.resolver_match.url_name == 'budget_reports' %}
                       bg-gray-700
                     {% else %}
                       hover:bg-gray-700
                     {% endif %}
                       group">
                        <svg class="shrink-0 w-5 h-5 transition duration-75
                        {% if request.resolver_match.url_name == 'budget_overview' or request.resolver_match.url_name == 'pre_budget_details' or request.resolver_match.url_name == 'quarterly_analysis' or request.resolver_match.url_name == 'transaction_history' or request.resolver_match.url_name == 'budget_reports' %}
                            text-white
                        {% else %}
                            text-gray-400 group-hover:text-white
                        {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"/></svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Budget Monitoring</span>
                    </a>
                </li>

                {% comment %} PR & AD Request {% endcomment %}
                <li>
                    <a href="{% url "pr_ad_list" %}" class="flex items-center p-2 rounded-lg text-white 
                    {% if request.resolver_match.url_name == 'pr_ad_list' %}
                       bg-gray-700
                     {% else %}
                       hover:bg-gray-700 
                     {% endif %}
                       group">
                        <svg class="shrink-0 w-5 h-5 transition duration-75 
                        {% if request.resolver_match.url_name == 'pr_ad_list' %}
                            text-white
                        {% else %} 
                            text-gray-400 group-hover:text-white
                        {% endif %}" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M192 0c-41.8 0-77.4 26.7-90.5 64L64 64C28.7 64 0 92.7 0 128L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64l-37.5 0C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM305 273L177 401c-9.4 9.4-24.6 9.4-33.9 0L79 337c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L271 239c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"/></svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">PR &amp; AD Request</span>
                    </a>
                </li>

                {% comment %} Department PRE {% endcomment %}
                <li>
                    <a href="{% url "department_pre_page" %}" class="flex items-center p-2 rounded-lg text-white 
                        {% if request.resolver_match.url_name == 'department_pre_page' %}
                        bg-gray-700
                        {% else %}
                            hover:bg-gray-700 
                        {% endif %} 
                        group">
                        <svg class="shrink-0 w-5 h-5 transition duration-75 
                        {% if request.resolver_match.url_name == 'department_pre_page' %}
                            text-white
                        {% endif %}
                          text-gray-400 group-hover:text-white" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM128 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm32-128a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM128 384a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm96-248c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0z"/></svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Department PRE</span>
                    </a>
                </li>

                {% comment %} Budget Re-alignment {% endcomment %}
                <li>
                    <a href="{% url 'realignment_history' %}" class="flex items-center p-2 rounded-lg text-white
                    {% if request.resolver_match.url_name == 'realignment_history' %}
                        bg-gray-700
                        {% else %}
                            hover:bg-gray-700
                        {% endif %}
                          group">
                        <svg class="shrink-0 w-5 h-5 transition duration-75
                        {% if request.resolver_match.url_name == 'realignment_history' %}
                            text-white
                        {% endif %} text-gray-400 group-hover:text-white" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M142.9 142.9c-17.5 17.5-30.1 38-37.8 59.8c-5.9 16.7-24.2 25.4-40.8 19.5s-25.4-24.2-19.5-40.8C55.6 150.7 73.2 122 97.6 97.6c87.2-87.2 228.3-87.5 315.8-1L455 55c6.9-6.9 17.2-8.9 26.2-5.2s14.8 12.5 14.8 22.2l0 128c0 13.3-10.7 24-24 24l-8.4 0c0 0 0 0 0 0L344 224c-9.7 0-18.5-5.8-22.2-14.8s-1.7-19.3 5.2-26.2l41.1-41.1c-62.6-61.5-163.1-61.2-225.3 1zM16 312c0-13.3 10.7-24 24-24l7.6 0 .7 0L168 288c9.7 0 18.5 5.8 22.2 14.8s1.7 19.3-5.2 26.2l-41.1 41.1c62.6 61.5 163.1 61.2 225.3-1c17.5-17.5 30.1-38 37.8-59.8c5.9-16.7 24.2-25.4 40.8-19.5s25.4 24.2 19.5 40.8c-10.8 30.6-28.4 59.3-52.9 83.8c-87.2 87.2-228.3 87.5-315.8 1L57 457c-6.9 6.9-17.2 8.9-26.2 5.2S16 449.7 16 440l0-119.6 0-.7 0-7.6z"/></svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Budget Re-alignment</span>
                    </a>
                </li>

                {% comment %} Archive History {% endcomment %}
                <li>
                    <a href="{% url 'archive_history' %}" class="flex items-center p-2 rounded-lg text-white
                    {% if request.resolver_match.url_name == 'archive_history' %}
                        bg-gray-700
                        {% else %}
                            hover:bg-gray-700
                        {% endif %}
                          group">
                        <svg class="shrink-0 w-5 h-5 transition duration-75
                        {% if request.resolver_match.url_name == 'archive_history' %}
                            text-white
                        {% endif %} text-gray-400 group-hover:text-white" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M32 32l448 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96L0 64C0 46.3 14.3 32 32 32zm0 128l448 0 0 256c0 35.3-28.7 64-64 64L96 480c-35.3 0-64-28.7-64-64l0-256zm128 80c0 8.8 7.2 16 16 16l160 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-160 0c-8.8 0-16 7.2-16 16z"/></svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Archive History</span>
                    </a>
                </li>

                {% comment %} Logout {% endcomment %}
                <li>
                    <a href="{% url "logout" %}" class="flex items-center p-2 rounded-lg text-white hover:bg-gray-700 group">
                        <svg class="shrink-0 w-5 h-5 transition duration-75 text-gray-400 group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 16">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 8h11m0 0L8 4m4 4-4 4m4-11h3a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-3"/>
                        </svg>
                        <span class="flex-1 ms-3 whitespace-nowrap">Logout</span>
                    </a>
                </li>

            </ul>
        </div>
    </aside>

    {% comment %} Main Content {% endcomment %}
    <div class="p-4 sm:ml-72">
        {% block main-content %}{% endblock main-content %}
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
           const sidebar = document.getElementById('logo-sidebar');
           const sidebarToggle = document.getElementById('sidebarToggle');
           
           // Toggle sidebar on button click
           sidebarToggle.addEventListener('click', function() {
                 sidebar.classList.toggle('-translate-x-full');
           });
  
           // Close sidebar when clicking outside on mobile
           document.addEventListener('click', function(event) {
                 const isClickInside = sidebar.contains(event.target) || 
                                   sidebarToggle.contains(event.target);
                 
                 if (!isClickInside && !sidebar.classList.contains('-translate-x-full')) {
                    if (window.innerWidth < 640) { // sm breakpoint
                       sidebar.classList.add('-translate-x-full');
                    }
                 }
           });
        });
     </script>
</body>
</html>