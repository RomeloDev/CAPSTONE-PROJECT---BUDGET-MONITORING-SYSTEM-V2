{% extends "reports/report_template.html" %}
{% load humanize %}

{% block report_content %}
<div class="report-title">
    <span style="font-size: 10pt; font-weight: normal;">For the Period: {{ quarter }} - {{ fiscal_year }}</span>
</div>

<div class="meta-info">
    <strong>Generated By:</strong> {{ generated_by }} <br>
    <strong>Date Generated:</strong> {{ date_generated }}
</div>



<table class="data-table">
    <thead>
        <tr>
            <th style="width: 40%; text-align: left;">Budget Line Item</th>
            <th style="width: 15%;">Category</th>
            <th style="width: 15%;">Allocated ({{ quarter }})</th>
            <th style="width: 15%;">Utilized ({{ quarter }})</th>
            <th style="width: 15%;">Balance ({{ quarter }})</th>
        </tr>
    </thead>
    <tbody>
        {% for row in report_data %}
        <tr>
            <td style="text-align: left;">{{ row.item_name }}</td>
            <td style="text-align: center;">{{ row.category }}</td>
            <td>Php {{ row.allocated|floatformat:2|intcomma }}</td>
            <td>Php {{ row.utilized|floatformat:2|intcomma }}</td>
            <td>Php {{ row.balance|floatformat:2|intcomma }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" style="text-align: center; padding: 20px;">No budget data found for this quarter.</td>
        </tr>
        {% endfor %}
        
        <!-- Total Row -->
        <tr class="total-row">
            <td colspan="2" style="text-align: right;">TOTAL</td>
            <td>Php {{ total_allocated|floatformat:2|intcomma }}</td>
            <td>Php {{ total_utilized|floatformat:2|intcomma }}</td>
            <td>Php {{ total_balance|floatformat:2|intcomma }}</td>
        </tr>
    </tbody>
</table>

<div class="notes">
    <strong>Summary Notes:</strong>
    <ul>
        <li>This report reflects the budget utilization specific to <strong>{{ quarter }}</strong> of Fiscal Year {{ fiscal_year }}.</li>
        <li>"Utilized" includes amounts from both Purchase Requests (PR) and Activity Designs (AD) processed in this quarter.</li>
    </ul>
</div>
{% endblock report_content %}
